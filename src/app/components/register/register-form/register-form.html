<div>
  <h2 class="header">Đăng ký</h2>
  <form #registerForm="ngForm" (ngSubmit)="onSubmit()">
    <div>
      <!-----------username FILL------->
      <div class="form-group">
        <label for="username"> Username </label>
        <input
          type="text"
          placeholder="username"
          name="username"
          id="username"
          minlength="4"
          [(ngModel)]="user.username"
          #username="ngModel"
          required
          text
          autocomplete="username"
        />
        @if(username.invalid && (username.dirty || username.touched)){
        <div class="alert">
          @if(username.hasError('required')){
          <div>Username is required.</div>
          } @if(username.hasError('minlength')){
          <div>Username must be atleast 4 characters.</div>
          }
        </div>
        }
      </div>

      <!-- Password FILL -->
      <div class="form-group">
        <label for="password">Mật khẩu </label>
        <input
          placeholder="Password"
          id="password"
          name="password"
          type="password"
          minlength="8"
          [(ngModel)]="user.password"
          #password="ngModel"
          required
          password
          autocomplete="current-password"
          passwordValidate
        />
        @if((password.dirty || password.touched)){ @if (password.invalid ){
        <div class="alert">
          @if(password.hasError('required')){
          <div>Password is required.</div>
          } @else if(password.hasError('minlength')){
          <div>Password must be atleast 8 characters.</div>
          } @else if(password.hasError('lackSecurity')){
          <div>Password must have a Capital, a normal, a special character, and a number</div>
          }
        </div>
        } @else {
        <div class="non-alert">Strong password!</div>
        } }
      </div>


        
      <!-- Email FILL -->
      <div class="form-group">
        <label for="emailAddress">Địa chỉ email </label>
        <input
          placeholder="Email address"
          id="emailAddress"
          name="emailAddress"
          type="email"
          [(ngModel)]="user.email"
          #email="ngModel"
          required
          email
          autocomplete="email"
        />
        @if (email.invalid && (email.dirty||email.touched)){
        <div class="alert">
          @if(email.hasError('required')){
          <div>Email is required.</div>
          } @if(email.hasError('email')){
          <div>Email invalid.</div>
          }
        </div>
        }
      </div>

      <!-- 1Name FILL -->

      <div class="form-group">
        <label for="firstName"> Họ </label>
        <input
          placeholder="First name"
          id="firstName"
          name="firstName"
          type="text"
          [(ngModel)]="user.firstName"
          minlength="2"
          #firstName="ngModel"
          required
          autocomplete="name"
        />
        @if (firstName.invalid && (firstName.dirty||firstName.touched)){
        <div class="alert">
          @if(firstName.hasError('required')){
          <div>First name is required.</div>
          } @if(firstName.hasError('minlength')){
          <div>Name must be 2 characters long</div>
          }
        </div>
        }
      </div>
      <!-- 2Name FILL -->

      <div class="form-group">
        <label for="secondName">Tên </label>
        <input
          placeholder="Second name"
          id="secondName"
          name="secondName"
          type="text"
          [(ngModel)]="user.secondName"
          minlength="2"
          #secondName="ngModel"
          required
          autocomplete="additional-name"
        />
        @if (secondName.invalid && (secondName.dirty||secondName.touched)){
        <div class="alert">
          @if(secondName.hasError('required')){
          <div>Second name is required.</div>
          } @if(secondName.hasError('minlength')){
          <div>Name must be 2 characters long</div>
          }
        </div>
        }
      </div>
      <!-- AGE FILL -->
      <div class="form-group">
        <label for="age">Tuổi </label>
        <input
          placeholder="Age"
          id="age"
          name="age"
          type="number"
          min="0"
          [(ngModel)]="user.age"
          #age="ngModel"
          required
          number
          autocomplete="age"
        />
        @if (age.invalid && (age.dirty||age.touched)){
        <div class="alert">
          @if(age.hasError('required')){
          <div>Age is required.</div>
          } @if(age.hasError('min')){
          <div>Age must be a positive number.</div>
          }
        </div>
        }
      </div>

      @if (formError) {
      <div class="login-error">
        {{ formError }}
      </div>
      }
      <button type="submit" class="submit-bttn" [disabled]="!registerForm.form.valid || isLoading">
        @if (isLoading) { Đang gửi... } @else { Gửi }
      </button>
    </div>
  </form>
</div>
